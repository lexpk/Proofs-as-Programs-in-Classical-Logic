\documentclass[onehalfspacing]{article}

\usepackage{amsmath,amssymb,amsthm}
\usepackage{ wasysym }
\usepackage{ stmaryrd }
\usepackage{ mathpartir }
\usepackage{xcolor}
\usepackage{bussproofs}
\usepackage[left=2.00cm, right=2.00cm, top=2.00cm,bottom=2.0cm]{geometry}
\usepackage{pdflscape}



\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

\newcommand{\llb}{\llbracket}
\newcommand{\rrb}{\rrbracket}
\newcommand{\blue}[1]{{\color{blue}#1}}
\newcommand{\var}{\text{var}}


\author{Alexander Pluska}
\title{Proofs as Programs in Classical Logic\\Notes}

\begin{document}

\maketitle

\section{Plan}

Goal:
\begin{itemize}
	\item Extract program from resolution proofs of $\forall\exists$-sentences over inductive datatypes.
\end{itemize}

\noindent Steps:

\begin{itemize}
	\item Give extensions of G\"odel's System \textbf{T} and HAS + EM$_1$ + SK$_1$ to arbitrary inductive datatypes (possibly GADTs) and prove (or rather check) properties, i.e. strong normalization, cut-elimination, uniqueness of normal forms.
	\item Adapt the results of~\cite{aschieri2014interactive} to exhibit realizers in $\mathcal{F} + \Phi$ for cut-free proofs in the extended version of HAS + EM$_1$ + SK$_1$ of formulas $\forall x\exists y Pxy$ where $P$ is a predicate in the extended version of \textbf{T}.
	\item Adapt the iterative learning from~\cite{aschieri2014interactive} to extract $\lambda$-terms from realizers.
	\item Give a proof translation from resolution proofs to cut-free sequent calculus proofs (already done?).
\end{itemize}

\noindent Questions:
\begin{itemize}
	\item When does the translated proof require more than EM$_1$?
	\item Using the methods in~\cite{aschieri2014interactive} the extracted term will be in simple $\lambda$-calculus. Is is possible to obtain a term in $\mathcal{F}$? (Talk with Federico Aschieri)
	\item Can the predicates be defined in $\mathcal{F}$ instead of $\mathcal{T}$? (probably yes)
	\item What happens if we add non-inductive theories?
	
\end{itemize}

\pagebreak

\section{Extracting constructive content from resolution proofs}
\subsection{The superposition calculus}
First let us define the calculus from which we wish to extract programs. It will comprise a core set of rules used in the vampire theorem prover taken from~\cite{Kov_cs_2013}. Note that we pay special attention to the usually neglected (and highly non-constructive) part of CNF transformation and Skolemization. Also note that we neglect the simplification ordering which is necessary to formulate a strategy for proof search but not for our proof transformation.

\noindent\textbf{Resolution.}
\begin{center}
\AxiomC{$A\vee B$}
\AxiomC{$\neg A'\vee C$}
\BinaryInfC{$(B\vee C)\theta$}
\DisplayProof
\end{center}
where $\theta$ is an mgu of $A$ and $A'$.

\noindent\textbf{Factoring.}
\begin{center}
	\AxiomC{$A\vee A'\vee B$}
	\UnaryInfC{$(A\vee B)\theta$}
	\DisplayProof
\end{center}
where $\theta$ is an mgu of $A$ and $A'$.

\noindent\textbf{Superposition.}
\begin{center}
	\AxiomC{$l=r\vee B$}
	\AxiomC{$L[s]\vee C$}
	\BinaryInfC{$(L[r]\vee B\vee C)\theta$}
	\DisplayProof
	\AxiomC{$l=r\vee B$}
	\AxiomC{$t[s] = t'\vee C$}
	\BinaryInfC{$(t[r] = t'\vee B\vee C)\theta$}
	\DisplayProof
	\AxiomC{$l=r\vee B$}
	\AxiomC{$t[s]\neq t'\vee C$}
	\BinaryInfC{$(t[r]\neq t'\vee B\vee C)\theta$}
	\DisplayProof
\end{center}
where $\theta$ is an mgu of $l$ and $s$, $s$ is not a variable, $L[s]$ is not an equality literal.

\noindent\textbf{Equality Resolution.}
\begin{center}
	\AxiomC{$s\neq t\vee C$}
	\UnaryInfC{$C\theta$}
	\DisplayProof
\end{center}
where $\theta$ is an mgu of $s$ and $t$.

\noindent\textbf{Equality Factoring.}
\begin{center}
	\AxiomC{$s=t\vee s'=t'\vee C$}
	\UnaryInfC{$(s=t\vee t\neq t'\vee C)\theta$}
	\DisplayProof
\end{center}
where $\theta$ is an mgu of $s$ and $s'$.

First let us look at an example of the transformation we going to do. We shall look at a proof of $\forall x\exists y: f(y) = g(x)$ from $\forall x: f(x) = g(h(x))$ and $\forall x: h(h'(x)) = x$. The program we extract hopefully is $h'$.

\begin{align}
	[\text{axiom}]&&\forall x: f(x) = g(h(x))\\
	[\text{cnf 1}]&&f(x_0) = g(h(x_0))\\
	[\text{axiom}]&&\forall x: h(h'(x)) = x\\
	[\text{cnf 3}]&&h(h'(x_0)) = x_0\\
	[\text{negated conjecture}]&&\neg\forall x\exists y: f(y) = g(x)\\
	[\text{ennf 5}]&&\exists x\forall y: f(y)\neq g(x)\\
	[\text{choice axiom}]&&\exists x\forall y: f(y)\neq g(x)\rightarrow \forall x : f(x) \neq g(s_0)\\
	[\text{skolemization 6, 7}]&&\forall x: f(x)\neq g(s_0)\\
	[\text{cnf 8}]&&f(x_1)\neq g(s_0)\\
	[\text{superposition 9, 2}]&\{\}&g(s_0)\neq g(h(x_0))\\
	[\text{superposition 10, 4}]&\{x_0\mapsto h'(x_0)\}&g(x_0)\neq g(s_0)\\
	[\text{equality resolution 11}]&&\bot
\end{align}

We first use the well known trick of adding the original conjecture to the negated one from~\cite{Luckham_1971} to transform this into a classical proof of $\forall x\exists y: f(x) = g(y)$ rather than a refutation of its negation:
\setcounter{equation}{0}
\begin{align}
	[\text{axiom}]&&\forall x: f(x) = g(h(x))\\
	[\text{cnf 1}]&&f(x_0) = g(h(x_0))\\
	[\text{axiom}]&&\forall x: h(h'(x)) = x\\
	[\text{cnf 3}]&&h(h'(x_0)) = x_0\\
	[\text{\color{red}{tautology}}]&&\forall x\exists y: f(y) = g(x)\vee\neg\forall x\exists y: f(y) = g(x)\\
	[\text{ennf 5}]&&\forall x\exists y: f(y) = g(x)\vee\exists x\forall y: f(y)\neq g(x)\\
	[\text{choice axiom}]&&\exists x\forall y: f(y)\neq g(x)\rightarrow \forall x : f(x) \neq g(s_0)\\
	[\text{choice axiom}]&&\forall x(\exists y: f(y)= g(x)\rightarrow f(s_1(x)) = g(x))\\
	[\text{skolemization 6, 7}]&&\forall x\exists y: f(y) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{skolemization 9, 8}]&&\forall x: f(s_1(x)) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{cnf 8}]&&f(s_1(x_1)) = g(x_1)\vee f(x_0)\neq g(s_0)\\
	[\text{superposition 11, 2}]&\{\}&f(s_1(x_1)) = g(x_1)\vee g(s_0)\neq g(h(x_0))\\
	[\text{superposition 12, 4}]&\{x_0\mapsto h'(x_0)\}&f(s_1(x_1)) = g(x_1)\vee g(x_0)\neq g(s_0)\\
	[\text{equality resolution 13}]&\{x_0\to s_0\}&f(s_1(x_1)) = g(x_1)
\end{align}

Next we eliminate free variables by propagating substitutions:

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}]&&\forall x: f(x) = g(h(x))\\
	[\text{cnf 1}]&&f(h'(x_0)) = g(h(h'(x_0)))\\
	[\text{axiom}]&&\forall x: h(h'(x)) = x\\
	[\text{cnf 3}]&&h(h'(x_0)) = x_0\\
	[\text{tautology}]&&\forall x\exists y: f(y) = g(x)\vee\neg\forall x\exists y: f(y) = g(x)\\
	[\text{ennf 5}]&&\forall x\exists y: f(y) = g(x)\vee\exists x\forall y: f(y)\neq g(x)\\
	[\text{choice axiom}]&&\exists x\forall y: f(y)\neq g(x)\rightarrow \forall x : f(x) \neq g(s_0)\\
	[\text{choice axiom}]&&\forall x(\exists y: f(y)= g(x)\rightarrow f(s_1(x)) = g(x))\\
	[\text{skolemization 6, 7}]&&\forall x\exists y: f(y) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{skolemization 9, 8}]&&\forall x: f(s_1(x)) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{cnf 8}]&&f(s_1(x_1)) = g(x_1)\vee f(h'(x_0))\neq g(s_0)\\
	[\text{superposition 11, 2}]&\{\}&f(s_1(x_1)) = g(x_1)\vee g(s_0)\neq g(h(h'(x_0)))\\
	[\text{superposition 12, 4}]&\{\}&f(s_1(x_1)) = g(x_1)\vee g(x_0)\neq g(s_0)\\
	[\text{equality resolution 13}]&\{x_0\to s_0\}&f(s_1(x_1)) = g(x_1)
\end{align}


\setcounter{equation}{0}
\begin{align}
	[\text{axiom}]&&\forall x: f(x) = g(h(x))\\
	[\text{cnf 1}]&&f(h'(s_0)) = g(h(h'(s_0)))\\
	[\text{axiom}]&&\forall x: h(h'(x)) = x\\
	[\text{cnf 3}]&&h(h'(s_0)) = s_0\\
	[\text{tautology}]&&\forall x\exists y: f(y) = g(x)\vee\neg\forall x\exists y: f(y) = g(x)\\
	[\text{ennf 5}]&&\forall x\exists y: f(y) = g(x)\vee\exists x\forall y: f(y)\neq g(x)\\
	[\text{choice axiom}]&&\exists x\forall y: f(y)\neq g(x)\rightarrow \forall x : f(x) \neq g(s_0)\\
	[\text{choice axiom}]&&\forall x(\exists y: f(y)= g(x)\rightarrow f(s_1(x)) = g(x))\\
	[\text{skolemization 6, 7}]&&\forall x\exists y: f(y) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{skolemization 9, 8}]&&\forall x: f(s_1(x)) = g(x)\vee\forall x: f(x)\neq g(s_0)\\
	[\text{cnf 8}]&&f(s_1(x_1)) = g(x_1)\vee f(h'(s_0))\neq g(s_0)\\
	[\text{superposition 11, 2}]&\{\}&f(s_1(x_1)) = g(x_1)\vee g(s_0)\neq g(h(h'(s_0)))\\
	[\text{superposition 12, 4}]&\{\}&f(s_1(x_1)) = g(x_1)\vee g(s_0)\neq g(s_0)\\
	[\text{equality resolution 13}]&\{\}&f(s_1(x_1)) = g(x_1)
\end{align}

Next we remove all the skolem constants in the conjecture-tautology by unification, propagate this change, and finally reinterpet superposition as composition to yield a valid intuitionistic proof:

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}]&&\forall x: f(x) = g(h(x))\\
	[\text{instantiation 1}]&&f(h'(x_1)) = g(h(h'(x_1)))\\
	[\text{axiom}]&&\forall x: h(h'(x)) = x\\
	[\text{instantiation 3}]&&h(h'(x_1)) = x_1\\
	[\text{tautology}]&&f(h'(x_1)) = g(x_1)\Rightarrow f(h'(x_1)) = g(x_1)\\
	[\text{equality 5, 2}]&\{\}&g(x_1)= g(h(h'(x_1)))\Rightarrow f(h'(x_1)) = g(x_1)\\
	[\text{equality 6, 4}]&\{\}&g(x_1)= g(x_1)\Rightarrow f(h'(x_1)) = g(x_1)\\
	[\text{equality 13}]&\{\}&f(h'(x_1)) = g(x_1)
\end{align}

Let us look at a second example: Consider the sentences $\forall x : p(x_0, f(x_0))$, $\forall x_0, x_1: (p(x_0, x_1)\Rightarrow q(x_0, g(x_1))$, $\forall x_0, x_1: (q(x_0, x_1)\Rightarrow r(x_0, h(x_1)))$. We take a look at a proof of $\forall x_0\exists x_1: r(x_0, x_1)$ which hopefully gives us $h\circ g\circ f$. First consider the output of vampire

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{negated conjecture}] &&\neg\forall  x_0 : \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{skolemisation 7,8}] && \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(x_3,h(x_4)) \vee \neg q(x_3, x_4)\\
	[\text{cnf transformation 9}] &&. \neg r(s_0,x_5)\\
	[\text{resolution 12, 13}] &\{x_3\mapsto s_0, x_5\mapsto h(x_4)\}& \neg q(s_0,x_4)\\
	[\text{resolution 14, 11}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&\neg p(s_0,x_2)\\
	[\text{resolution 15, 10}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}& \bot
\end{align}

Again replace negated conjecture by tautology

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(x_3,h(x_4)) \vee \neg q(x_3, x_4)\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0, x_5)\\
	[\text{resolution 14, 15}] &\{x_3\mapsto s_0, x_5\mapsto h(x_4)\}&r(x_6, s_1(x_6))\vee \neg q(s_0,x_4)\\
	[\text{resolution 16, 13}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

We propagate the substitutions

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(s_0,h(x_4)) \vee \neg q(s_0, x_4)\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(x_4))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,x_4)\\
	[\text{resolution 16, 13}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(s_0,g(x_2)) \vee \neg p(s_0, x_2)\\
	[\text{cnf transformation 6}] && r(s_0,h(g(x_2))) \vee \neg q(s_0, g(x_2))\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(g(x_2)))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,g(x_2))\\
	[\text{resolution 16, 13}] &\{\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(s_0, f(s_0))\\
	[\text{cnf transformation 5}] && q(s_0,g(f(s_0))) \vee \neg p(s_0, f(s_0))\\
	[\text{cnf transformation 6}] && r(s_0,h(g(f(s_0)))) \vee \neg q(s_0, g(f(s_0)))\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(g(f(s_0))))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,g(f(s_0)))\\
	[\text{resolution 16, 13}] &\{\}&r(x_6, s_1(x_6))\vee\neg p(s_0,f(s_0))\\
	[\text{resolution 17, 12}] &\{\}&r(x_6, s_1(x_6))
\end{align}

Then unification at 15 gives $s_1 = h\circ g\circ f$ and $s_0 = x_6$ and the final transformation gives: 


\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{instantiation 1}] && p(x_6, f(x_6))\\
	[\text{instantiation 2}] && p(x_6, f(x_6))\Rightarrow q(x_6,g(f(x_6))) \\
	[\text{instantiation 3}] && q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6)))) \\
	[\text{tautology}] && r(x_6, h(g(f(x_6))))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 6, 7}] &\{\}&q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 5, 8}] &\{\}&p(x_6,f(x_6))\Rightarrow r(x_6, h(g(f(x_6))))\\
	[\text{composition 4, 9}] &\{\}&r(x_6, h(g(f(x_6))))
\end{align}

\pagebreak

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{negated conjecture}] &&\neg\forall  x_0 : \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{skolemisation 7,8}] && \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(x_3,h(x_4)) \vee \neg q(x_3, x_4)\\
	[\text{cnf transformation 9}] &&. \neg r(s_0,x_5)\\
	[\text{resolution 12, 13}] &\{x_3\mapsto s_0, x_5\mapsto h(x_4)\}& \neg q(s_0,x_4)\\
	[\text{resolution 14, 11}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&\neg p(s_0,x_2)\\
	[\text{resolution 15, 10}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}& \bot
\end{align}

Again replace negated conjecture by tautology

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(x_3,h(x_4)) \vee \neg q(x_3, x_4)\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0, x_5)\\
	[\text{resolution 14, 15}] &\{x_3\mapsto s_0, x_5\mapsto h(x_4)\}&r(x_6, s_1(x_6))\vee \neg q(s_0,x_4)\\
	[\text{resolution 16, 13}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

We propagate the substitutions

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(x_1,g(x_2)) \vee \neg p(x_1, x_2)\\
	[\text{cnf transformation 6}] && r(s_0,h(x_4)) \vee \neg q(s_0, x_4)\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(x_4))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,x_4)\\
	[\text{resolution 16, 13}] &\{x_1\mapsto s_0, x_4\mapsto g(x_2)\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(x_0,f(x_0))\\
	[\text{cnf transformation 5}] && q(s_0,g(x_2)) \vee \neg p(s_0, x_2)\\
	[\text{cnf transformation 6}] && r(s_0,h(g(x_2))) \vee \neg q(s_0, g(x_2))\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(g(x_2)))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,g(x_2))\\
	[\text{resolution 16, 13}] &\{\}&r(x_6, s_1(x_6))\vee\neg p(s_0,x_2)\\
	[\text{resolution 17, 12}] &\{x_0\mapsto s_0, x_2\mapsto f(s_0)\}&r(x_6, s_1(x_6))
\end{align}

\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{tautology}] &&\forall  x_0 \exists x_1 : r(x_0,x_1)\vee \neg\forall  x_0 \exists x_1 : r(x_0,x_1)\\
	[\text{ennf transformation 2}] && \forall x_0, x_1 : (q(x_0,g(x_1)) \vee \neg p(x_0,x_1)) \\
	[\text{ennf transformation 3}] &&\forall x_0, x_1 : (r(x_0,h(x_1)) \vee \neg q(x_0, x_1)) \\
	[\text{ennf transformation 4}] && \forall  x_0 : \exists x_1 : r(x_0,x_1)\vee \exists x_0 \forall x_1 : \neg r(x_0, x_1)\\
	[\text{choice axiom}] && \exists x_0 : \forall x_1 : \neg r(x_0, x_1) \Rightarrow \forall x_1 : \neg r(s_0,x_1)\\
	[\text{choice axiom}] &&\forall x_0(\exists x_1: r(x_0, x_1)\Rightarrow r(x_0, s_1(x_0)))\\
	[\text{skolemisation 7,8}] && \forall  x_0 \exists x_1 : r(x_0,x_1)\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{skolemisation 9,10}] && \forall  x_0 :  r(x_0, s_1(x_0))\vee \forall x_1 : \neg r(s_0, x_1)\\
	[\text{cnf transformation 1}] && p(s_0, f(s_0))\\
	[\text{cnf transformation 5}] && q(s_0,g(f(s_0))) \vee \neg p(s_0, f(s_0))\\
	[\text{cnf transformation 6}] && r(s_0,h(g(f(s_0)))) \vee \neg q(s_0, g(f(s_0)))\\
	[\text{cnf transformation 11}] && r(x_6, s_1(x_6))\vee\neg r(s_0,h(g(f(s_0))))\\
	[\text{resolution 14, 15}] &\{\}&r(x_6, s_1(x_6))\vee\neg q(s_0,g(f(s_0)))\\
	[\text{resolution 16, 13}] &\{\}&r(x_6, s_1(x_6))\vee\neg p(s_0,f(s_0))\\
	[\text{resolution 17, 12}] &\{\}&r(x_6, s_1(x_6))
\end{align}

Then unification at 15 gives $s_1 = h\circ g\circ f$ and $s_0 = x_6$ and the final transformation gives: 


\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{instantiation 1}] && p(x_6, f(x_6))\\
	[\text{instantiation 2}] && p(x_6, f(x_6))\Rightarrow q(x_6,g(f(x_6))) \\
	[\text{instantiation 3}] && q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6)))) \\
	[\text{tautology}] && r(x_6, h(g(f(x_6))))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 6, 7}] &\{\}&q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 5, 8}] &\{\}&p(x_6,f(x_6))\Rightarrow r(x_6, h(g(f(x_6))))\\
	[\text{composition 4, 9}] &\{\}&r(x_6, h(g(f(x_6))))
\end{align}


\setcounter{equation}{0}
\pagebreak
\begin{landscape}
Now a third example including induction:
\begin{align}
	[\text{input}] &&	\forall x_0 : z + x_0 = x_0 \\
	[\text{input}] &&	\forall x_0, x_1 : s(x_0) + x_1 = s(x_0 + x_1) \\
	[\text{input}] &&	\forall x_0, x_1 : x_0 + x_1 = x_1 + x_0 \\
	[\text{input}] &&	\forall x_0, x_1 : (p(x_0,x_1) \Leftrightarrow (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0)) \\
	[\text{input}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_1 : p(s(x_0),x_1)) \wedge \exists x_1 : p(z,x_1)) \Rightarrow \forall x_0 : \exists x_1 : p(x_0,x_1) \\
	[\text{negated conjecture}] &&	\neg \forall x_0 : \exists x_1 : p(x_0,x_1) \\
	[\text{rectify 5}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_2 : p(s(x_0),x_2)) \wedge \exists x_3 : p(z,x_3)) \Rightarrow \forall x_4 : \exists x_5 : p(x_4,x_5) \\
	[\text{ennf transformation 7}]&&	\forall x_4 : \exists x_5 : p(x_4,x_5) \vee (\exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3))  \\
	[\text{flattening 8}] &&	 \forall x_4 : \exists x_5 : p(x_4,x_5) \vee \exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3) \\
	[\text{ennf transformation 6}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \\
	[\text{nnf transformation 4}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge ((s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0) \vee \neg p(x_0,x_1))) \\
	[\text{flattening 11}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0 \vee \neg p(x_0,x_1))) \\
	[\text{rectify 9}] &&	 \forall x_0 : \exists x_1 : p(x_0,x_1) \vee \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \vee \forall x_5 : \neg p(z,x_5) \\
	[\text{choice axiom}] &&	 \forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow p(x_0,s_0(x_0))) \\
	[\text{choice axiom}] &&	 \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \Rightarrow (\forall x_3 : \neg p(s(s_1),x_3) \wedge \exists x_4 : p(s_1,x_4)) \\
	[\text{choice axiom}] &&	 \exists x_4 : p(s_1,x_4) \Rightarrow p(s_1,s_2) \\
	[\text{skolemisation 13,16,15,14}] &&	 \forall x_0 : p(x_0,s_0(x_0)) \vee (\forall x_3 : \neg p(s(s_1),x_3) \wedge p(s_1,s_2)) \vee \forall x_5 : \neg p(z,x_5) \\
	[\text{choice axiom}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \Rightarrow \forall x_1 : \neg p(s_3,x_1) \\
	[\text{skolemisation 9,17}] &&	 \forall x_1 : \neg p(s_3,x_1) \\
	[\text{cnf transformation 1}] &&	 z + x_0 = x_0 \\
	[\text{cnf transformation 2}] &&	 s(x_0) + x_1 = s(x_0 + x_1) \\
	[\text{cnf transformation 3}] &&	 x_0 + x_1 = x_1 + x_0 \\
	[\text{cnf transformation 11}] &&	 \neg p(x_0,x_1) \vee x_1 + x_1 = x_0 \vee s(x_1 + x_1) = x_0 \\
	[\text{cnf transformation 11}] &&	 p(x_0,x_1) \vee x_1 + x_1 \neq x_0 \\
	[\text{cnf transformation 11}] &&	 p(x_0,x_1) \vee s(x_1 + x_1) \neq x_0
\end{align}
\begin{align}
	[\text{cnf transformation 17}] &&	 \neg p(z,x_5) \vee p(s_1,s_2) \vee p(x_0,s_0(x_0)) \\
	[\text{cnf transformation 17}] &&	 \neg p(s(s_1),x_3) \vee p(x_0,s_0(x_0)) \vee \neg p(z,x_5) \\
	[\text{cnf transformation 19}] &&	 \neg p(s_3,x_1) \\
	[\text{equality resolution 25}] &&	 p(s(x_1 + x_1),x_1) \\
	[\text{equality resolution 24}] &&	 p(x_1 + x_1,x_1) \\
	[\text{superposition 30,20}] &\{x_0\mapsto x, x_1\mapsto z\}&	 p(z,z) \\
	[\text{superposition 21,22}] &\{x_0\mapsto x_3, x_1\mapsto x_2\}&	 x_3 + s(x_2) = s(x_2+x_3) \\
	[\text{superposition 30,21}] &\{x_0\mapsto x_1\}&	 p(s(x_1+s(x_1)),s(x_1)) \\
	[\text{forward demodulation 33,32}] &\{x_2\mapsto x_1, x_3\mapsto x_1\}&	 p(s(s(x_1 + x_1)),s(x_1)) \\
	[\text{resolution 26,31}] &\{x_5\mapsto z\}&	 p(x_0,s_0(x_0)) \vee p(s_1,s_2) \\
	[\text{resolution 35,28}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}&	 p(s_1,s_2) \\
	[\text{resolution 23,36}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	s_1 = s(s_2 + s_2) \vee s_1 = s_2 + s_2 \\
	[\text{superposition 24,37}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	 p(s(s_1),s(s_2)) \vee s_1 = s_2 + s_2 \\
	[\text{resolution 38,27}] &\{x_2\mapsto s(s_2), x_5\mapsto x_1\}& 	 \neg p(z,x_1) \vee p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
	[\text{resolution 39,31}] &\{x_1\mapsto z\}& 	 p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
	[\text{resolution 40,28}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& 	 s_1 = s_2 + s_2 \\
	[\text{superposition 41,29}] &\{x_1\mapsto s_2\}&   p(s(s_1),s_2)\\
	[\text{resolution 42,27}] &\{x_3\mapsto s_2, x_5\mapsto x_1\}& 	 \neg p(z,x_1) \vee p(x_0,s_0(x_0)) \\
	[\text{resolution 43,31}] &\{x_1\mapsto z\}& 	 p(x_0,s_0(x_0)) \\
	[\text{resolution 44,28}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& \bot
\end{align}
\end{landscape}

\setcounter{equation}{0}
\pagebreak
\begin{landscape}
	Again replace negated conjecture by tautology
	\begin{align}
		[\text{input}] &&	\forall x_0 : z + x_0 = x_0 \\
		[\text{input}] &&	\forall x_0, x_1 : s(x_0) + x_1 = s(x_0 + x_1) \\
		[\text{input}] &&	\forall x_0, x_1 : x_0 + x_1 = x_1 + x_0 \\
		[\text{input}] &&	\forall x_0, x_1 : (p(x_0,x_1) \Leftrightarrow (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0)) \\
		[\text{input}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_1 : p(s(x_0),x_1)) \wedge \exists x_1 : p(z,x_1)) \Rightarrow \forall x_0 : \exists x_1 : p(x_0,x_1) \\
		[\text{tautology}] &&	\forall x_0:\exists x_1:p(x_0, x_1)\vee \neg \forall x_0 : \exists x_1 : p(x_0,x_1) \\
		[\text{rectify 5}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_2 : p(s(x_0),x_2)) \wedge \exists x_3 : p(z,x_3)) \Rightarrow \forall x_4 : \exists x_5 : p(x_4,x_5) \\
		[\text{ennf transformation 7}]&&	\forall x_4 : \exists x_5 : p(x_4,x_5) \vee (\exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3))  \\
		[\text{flattening 8}] &&	 \forall x_4 : \exists x_5 : p(x_4,x_5) \vee \exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3) \\
		[\text{ennf transformation 6}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \\
		[\text{nnf transformation 4}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge ((s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0) \vee \neg p(x_0,x_1))) \\
		[\text{flattening 11}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0 \vee \neg p(x_0,x_1))) \\
		[\text{rectify 9}] &&	 \forall x_0 : \exists x_1 : p(x_0,x_1) \vee \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \vee \forall x_5 : \neg p(z,x_5) \\
		[\text{choice axiom}] &&	 \forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow p(x_0,s_0(x_0))) \\
		[\text{choice axiom}] &&	 \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \Rightarrow (\forall x_3 : \neg p(s(s_1),x_3) \wedge \exists x_4 : p(s_1,x_4)) \\
		[\text{choice axiom}] &&	 \exists x_4 : p(s_1,x_4) \Rightarrow p(s_1,s_2) \\
		[\text{skolemisation 13,16,15,14}] &&	 \forall x_0 : p(x_0,s_0(x_0)) \vee (\forall x_3 : \neg p(s(s_1),x_3) \wedge p(s_1,s_2)) \vee \forall x_5 : \neg p(z,x_5) \\
		[\text{choice axiom}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \Rightarrow \forall x_1 : \neg p(s_3,x_1) \\
		[\text{choice axiom}] &&     \forall x_0(\exists x_1: p(x_0, x_1)\Rightarrow p(x_0, s_4(x_0)))\\
		[\text{skolemisation 9,17,18}] &&	 \forall x_0: p(x_0, s_4(x_0))\vee\forall x_1 : \neg p(s_3,x_1) \\
		[\text{cnf transformation 1}] &&	 z + x_0 = x_0 \\
		[\text{cnf transformation 2}] &&	 s(x_0) + x_1 = s(x_0 + x_1) \\
		[\text{cnf transformation 3}] &&	 x_0 + x_1 = x_1 + x_0 \\
		[\text{cnf transformation 11}] &&	 \neg p(x_0,x_1) \vee x_1 + x_1 = x_0 \vee s(x_1 + x_1) = x_0 \\
		[\text{cnf transformation 11}] &&	 p(x_0,x_1) \vee x_1 + x_1 \neq x_0 \\
		[\text{cnf transformation 11}] &&	 p(x_0,x_1) \vee s(x_1 + x_1) \neq x_0
	\end{align}
	\begin{align}
		[\text{cnf transformation 17}] &&	 \neg p(z,x_5) \vee p(s_1,s_2) \vee p(x_0,s_0(x_0)) \\
		[\text{cnf transformation 17}] &&	 \neg p(s(s_1),x_3) \vee p(x_0,s_0(x_0)) \vee \neg p(z,x_5) \\
		[\text{cnf transformation 20}] &&	 p(x_0, s_4(x_0))\vee\neg p(s_3,x_1) \\
		[\text{equality resolution 26}] &&	 p(s(x_1 + x_1),x_1) \\
		[\text{equality resolution 25}] &&	 p(x_1 + x_1,x_1) \\
		[\text{superposition 31,21}] &\{x_0\mapsto z, x_1\mapsto z\}&	 p(z,z) \\
		[\text{superposition 22,23}] &\{x_0\mapsto x_3, x_1\mapsto x_2\}&	 x_3 + s(x_2)) = s(x_2+x_3)) \\
		[\text{superposition 31,22}] &\{x_0\mapsto x_1\}&	 p(s(x_1+s(x_1)),s(x_1)) \\
		[\text{forward demodulation 34,33}] &\{x_2\mapsto x_1, x_3\mapsto x_1\}&	 p(s(s(x_1 + x_1)),s(x_1)) \\
		[\text{resolution 27,32}] &\{x_5\mapsto z\}&	 p(x_0,s_0(x_0)) \vee p(s_1,s_2) \\
		[\text{resolution 36,29}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}&	 p(x_0, s_4(x_0))\vee p(s_1,s_2) \\
		[\text{resolution 24,37}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	p(x_0, s_4(x_0))\vee s_1 = s(s_2 + s_2) \vee s_1 = s_2 + s_2 \\
		[\text{superposition 25,38}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	 p(x_0, s_4(x_0))\vee p(s(s_1),s(s_2)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 39,28}] &\{x_2\mapsto s(s_2), x_5\mapsto x_1\}& 	 p(x_0, s_4(x_0))\vee \neg p(z,x_1) \vee p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 40,32}] &\{x_1\mapsto z\}& 	 p(x_0, s_4(x_0))\vee p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 41,29}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& 	 p(x_0, s_4(x_0))\vee s_1 = s_2 + s_2 \\
		[\text{superposition 42,30}] &\{x_1\mapsto s_2\}& 	p(x_0, s_4(x_0))\vee p(s(s_1),s_2)\\
		[\text{resolution 43,28}] &\{x_3\mapsto s_2, x_5\mapsto x_1\}& 	 p(x_0, s_4(x_0))\vee\neg p(z,x_1) \vee p(x_0,s_0(x_0)) \\
		[\text{resolution 44,32}] &\{x_1\mapsto z\}& 	 p(x_0, s_4(x_0))\vee p(x_0,s_0(x_0)) \\
		[\text{resolution 45,29}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& p(x_0, s_4(x_0))
	\end{align}
\end{landscape}


\setcounter{equation}{0}
\pagebreak
\begin{landscape}
	We propagate the substitutions
	\begin{align}
		[\text{input}] &&	\forall x_0 : z + x_0 = x_0 \\
		[\text{input}] &&	\forall x_0, x_1 : s(x_0) + x_1 = s(x_0 + x_1) \\
		[\text{input}] &&	\forall x_0, x_1 : x_0 + x_1 = x_1 + x_0 \\
		[\text{input}] &&	\forall x_0, x_1 : (p(x_0,x_1) \Leftrightarrow (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0)) \\
		[\text{input}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_1 : p(s(x_0),x_1)) \wedge \exists x_1 : p(z,x_1)) \Rightarrow \forall x_0 : \exists x_1 : p(x_0,x_1) \\
		[\text{tautology}] &&	\forall x_0:\exists x_1:p(x_0, x_1)\vee \neg \forall x_0 : \exists x_1 : p(x_0,x_1) \\
		[\text{rectify 5}] &&	(\forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow \exists x_2 : p(s(x_0),x_2)) \wedge \exists x_3 : p(z,x_3)) \Rightarrow \forall x_4 : \exists x_5 : p(x_4,x_5) \\
		[\text{ennf transformation 7}]&&	\forall x_4 : \exists x_5 : p(x_4,x_5) \vee (\exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3))  \\
		[\text{flattening 8}] &&	 \forall x_4 : \exists x_5 : p(x_4,x_5) \vee \exists x_0 : (\forall x_2 : \neg p(s(x_0),x_2) \wedge \exists x_1 : p(x_0,x_1)) \vee \forall x_3 : \neg p(z,x_3) \\
		[\text{ennf transformation 6}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \\
		[\text{nnf transformation 4}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge ((s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0) \vee \neg p(x_0,x_1))) \\
		[\text{flattening 11}] &&	 \forall x_0, x_1 : ((p(x_0,x_1) \vee (s(x_1 + x_1) \neq x_0 \wedge x_1 + x_1 \neq x_0)) \wedge (s(x_1 + x_1) = x_0 \vee x_1 + x_1 = x_0 \vee \neg p(x_0,x_1))) \\
		[\text{rectify 9}] &&	 \forall x_0 : \exists x_1 : p(x_0,x_1) \vee \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \vee \forall x_5 : \neg p(z,x_5) \\
		[\text{choice axiom}] &&	 \forall x_0 : (\exists x_1 : p(x_0,x_1) \Rightarrow p(x_0,s_0(x_0))) \\
		[\text{choice axiom}] &&	 \exists x_2 : (\forall x_3 : \neg p(s(x_2),x_3) \wedge \exists x_4 : p(x_2,x_4)) \Rightarrow (\forall x_3 : \neg p(s(s_1),x_3) \wedge \exists x_4 : p(s_1,x_4)) \\
		[\text{choice axiom}] &&	 \exists x_4 : p(s_1,x_4) \Rightarrow p(s_1,s_2) \\
		[\text{skolemisation 13,16,15,14}] &&	 \forall x_0 : p(x_0,s_0(x_0)) \vee (\forall x_3 : \neg p(s(s_1),x_3) \wedge p(s_1,s_2)) \vee \forall x_5 : \neg p(z,x_5) \\
		[\text{choice axiom}] &&	 \exists x_0 : \forall x_1 : \neg p(x_0,x_1) \Rightarrow \forall x_1 : \neg p(s_3,x_1) \\
		[\text{choice axiom}] &&     \forall x_0(\exists x_1: p(x_0, x_1)\Rightarrow p(x_0, s_4(x_0)))\\
		[\text{skolemisation 9,17,18}] &&	 \forall x_0: p(x_0, s_4(x_0))\vee\forall x_1 : \neg p(s_3,x_1) \\
		[\text{cnf transformation 1}] &&	 z + z = z \\
		[\text{cnf transformation 2}] &&	 s(x_1) + x_1 = s(x_1 + x_1) \\
		[\text{cnf transformation 3}] &&	 x_1 + x_2 = x_1 + x_1 \\
		[\text{cnf transformation 11}] &&	 \neg p(x_0,x_1) \vee x_1 + x_1 = x_0 \vee s(x_1 + x_1) = x_0 \\
		[\text{cnf transformation 11}] &&	 p(x_0,z) \vee z + z \neq x_0 \\
		[\text{cnf transformation 11}] &&	 p(x_0,x_1) \vee s(x_1 + x_1) \neq x_0
	\end{align}
	\begin{align}
		[\text{cnf transformation 17}] &&	 \neg p(z,z) \vee p(s_1,s_2) \vee p(s_3,s_0(s_3)) \\
		[\text{cnf transformation 17}] &&	 \neg p(s(s_1),x_3) \vee p(x_0,s_0(x_0)) \vee \neg p(z,x_5) \\
		[\text{cnf transformation 20}] &&	 p(s_3, s_4(s_3))\vee\neg p(s_3,s_0(s_3)) \\
		[\text{equality resolution 26}] &&	 p(s(x_1 + x_1),x_1) \\
		[\text{equality resolution 25}] &&	 p(z + z, z) \\
		[\text{superposition 31,21}] &\{\}&	 p(z,z) \\
		[\text{superposition 22,23}] &\{\}&	 x_1 + s(x_1) = s(x_1+x_1) \\
		[\text{superposition 31,22}] &\{\}&	 p(s(x_1+s(x_1)),s(x_1)) \\
		[\text{forward demodulation 34,33}] &&	 p(s(s(x_1 + x_1)),s(x_1)) \\
		[\text{resolution 27,32}] &\{\}&	 p(s_3,s_0(s_3)) \vee p(s_1,s_2) \\
		[\text{resolution 36,29}] &\{\}&	 p(s_1, s_4(s_1))\vee p(s_1,s_2) \\
		[\text{resolution 24,37}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	p(x_0, s_4(x_0))\vee s_1 = s(s_2 + s_2) \vee s_1 = s_2 + s_2 \\
		[\text{superposition 25,38}] &\{x_0\mapsto s_1, x_1\mapsto s_2\}& 	 p(x_0, s_4(x_0))\vee p(s(s_1),s(s_2)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 39,28}] &\{x_2\mapsto s(s_2), x_5\mapsto x_1\}& 	 p(x_0, s_4(x_0))\vee \neg p(z,x_1) \vee p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 40,32}] &\{x_1\mapsto z\}& 	 p(x_0, s_4(x_0))\vee p(x_0,s_0(x_0)) \vee s_1 = s_2 + s_2 \\
		[\text{resolution 41,29}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& 	 p(x_0, s_4(x_0))\vee s_1 = s_2 + s_2 \\
		[\text{superposition 42,30}] &\{x_1\mapsto s_2\}& 	p(x_0, s_4(x_0))\vee p(s(s_1),s_2)\\
		[\text{resolution 43,28}] &\{x_3\mapsto s_2, x_5\mapsto x_1\}& 	 p(x_0, s_4(x_0))\vee\neg p(z,x_1) \vee p(x_0,s_0(x_0)) \\
		[\text{resolution 44,32}] &\{x_1\mapsto z\}& 	 p(x_0, s_4(x_0))\vee p(x_0,s_0(x_0)) \\
		[\text{resolution 45,29}] &\{x_0\mapsto s_3, x_1\mapsto s_0(s_3)\}& p(x_0, s_4(x_0))
	\end{align}
\end{landscape}

Then unification at 15 gives $s_1 = h\circ g\circ f$ and $s_0 = x_6$ and the final transformation gives: 


\setcounter{equation}{0}
\begin{align}
	[\text{axiom}] && \forall x_0: p(x_0,f(x_0))\\
	[\text{axiom}] && \forall x_0, x_1 : (p(x_0,x_1) \Rightarrow q(x_0,g(x_1)))\\
	[\text{axiom}] && \forall x_0, x_1 : (q(x_0,x_1) \Rightarrow r(x_0,h(x_1)))\\
	[\text{instantiation 1}] && p(x_6, f(x_6))\\
	[\text{instantiation 2}] && p(x_6, f(x_6))\Rightarrow q(x_6,g(f(x_6))) \\
	[\text{instantiation 3}] && q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6)))) \\
	[\text{tautology}] && r(x_6, h(g(f(x_6))))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 6, 7}] &\{\}&q(x_6, g(f(x_6)))\Rightarrow r(x_6,h(g(f(x_6))))\\
	[\text{composition 5, 8}] &\{\}&p(x_6,f(x_6))\Rightarrow r(x_6, h(g(f(x_6))))\\
	[\text{composition 4, 9}] &\{\}&r(x_6, h(g(f(x_6))))
\end{align}




\pagebreak
\bibliographystyle{acm}
\bibliography{references}

\end{document}